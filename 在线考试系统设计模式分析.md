# åœ¨çº¿è€ƒè¯•ç³»ç»Ÿ - è½¯ä»¶è®¾è®¡æ¨¡å¼åˆ†ææŠ¥å‘Š

## é¡¹ç›®æ¦‚è¿°

**é¡¹ç›®åç§°**: Online Exam System (åœ¨çº¿è€ƒè¯•ç³»ç»Ÿ)
**æŠ€æœ¯æ ˆ**: Java 17, Servlet/JSP, MySQL, Maven
**æ¶æ„æ¨¡å¼**: MVC ä¸‰å±‚æ¶æ„
**é¡¹ç›®è·¯å¾„**: `E:\online_exam_system_v4_fixed\online_exam_system`

---

## è®¾è®¡æ¨¡å¼åº”ç”¨åˆ†æ

### 1. MVC (Model-View-Controller) æ¨¡å¼ â­ï¸ æ ¸å¿ƒæ¶æ„æ¨¡å¼

**æ¨¡å¼è¯´æ˜**: å°†åº”ç”¨ç¨‹åºåˆ†ä¸ºä¸‰ä¸ªæ ¸å¿ƒç»„ä»¶ï¼Œåˆ†ç¦»ä¸šåŠ¡é€»è¾‘ã€æ•°æ®å’Œç•Œé¢æ˜¾ç¤ºã€‚

**åº”ç”¨ä½ç½®**: æ•´ä¸ªé¡¹ç›®çš„æ¶æ„åŸºç¡€

#### æ¶æ„å±‚æ¬¡:

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚          View (è§†å›¾å±‚)               â”‚
â”‚   JSP Pages (admin/teacher/student) â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
               â”‚ è¯·æ±‚/å“åº”
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚       Controller (æ§åˆ¶å±‚)            â”‚
â”‚   Servlets (å¤„ç†HTTPè¯·æ±‚)            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
               â”‚ è°ƒç”¨ä¸šåŠ¡æ–¹æ³•
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚        Model (æ¨¡å‹å±‚)                â”‚
â”‚   Entity + DAO (æ•°æ®è®¿é—®å¯¹è±¡)        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
               â”‚ JDBC
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚        Database (æ•°æ®åº“)             â”‚
â”‚          MySQL                       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

#### ä»£ç ç¤ºä¾‹:

**Model å±‚** - `User.java` (å®ä½“ç±»):
```java
// æ–‡ä»¶: src/main/java/com/exam/entity/User.java
package com.exam.entity;

public class User {
    private int id;
    private String username;
    private String password;
    private String role;
    private String displayName;

    // getters and setters
    public int getId() { return id; }
    public void setId(int id) { this.id = id; }
    public String getUsername() { return username; }
    public void setUsername(String username) { this.username = username; }
    // ... å…¶ä»–getter/setteræ–¹æ³•
}
```

**Controller å±‚** - `AdminUserListServlet.java`:
```java
// æ–‡ä»¶: src/main/java/com/exam/servlet/admin/AdminUserListServlet.java:16-32
@WebServlet("/admin/user/list")
public class AdminUserListServlet extends HttpServlet {

    private UserDao userDao = new UserDao();

    @Override
    protected void doGet(HttpServletRequest req, HttpServletResponse resp)
            throws ServletException, IOException {
        // è®¾ç½®å“åº”ç¼–ç æ ¼å¼
        resp.setContentType("text/html;charset=UTF-8");

        // è·å–æ‰€æœ‰ç”¨æˆ·
        List<User> users = userDao.findAll();
        // è®¾ç½®å±æ€§ä¼ ç»™ JSP
        req.setAttribute("users", users);
        // è·³è½¬é¡µé¢
        req.getRequestDispatcher("/admin/admin_user_list.jsp").forward(req, resp);
    }
}
```

**View å±‚**: `admin_user_list.jsp` (JSPé¡µé¢å±•ç¤ºæ•°æ®)

**ä¼˜åŠ¿**:
- âœ… åˆ†ç¦»å…³æ³¨ç‚¹ï¼ŒèŒè´£æ¸…æ™°
- âœ… ä¾¿äºå›¢é˜Ÿåä½œå¼€å‘
- âœ… æ˜“äºç»´æŠ¤å’Œæ‰©å±•
- âœ… æ”¯æŒå¤šè§†å›¾å±•ç¤ºåŒä¸€æ•°æ®

---

### 2. DAO (Data Access Object) æ¨¡å¼ â­ï¸ æ•°æ®è®¿é—®æ¨¡å¼

**æ¨¡å¼è¯´æ˜**: å°†æ•°æ®è®¿é—®é€»è¾‘å°è£…åœ¨ç‹¬ç«‹çš„ç±»ä¸­ï¼Œæä¾›ç»Ÿä¸€çš„æ•°æ®æ“ä½œæ¥å£ã€‚

**åº”ç”¨ä½ç½®**: `com.exam.dao` åŒ…ä¸‹æ‰€æœ‰ç±»

**å®ç°çš„DAOç±»**:
- `UserDao.java` - ç”¨æˆ·æ•°æ®è®¿é—®
- `ExamDao.java` - è€ƒè¯•æ•°æ®è®¿é—®
- `QuestionDao.java` - è¯•é¢˜æ•°æ®è®¿é—®
- `CourseDao.java` - è¯¾ç¨‹æ•°æ®è®¿é—®
- `ClassDao.java` - ç­çº§æ•°æ®è®¿é—®
- `ScoreDao.java` - æˆç»©æ•°æ®è®¿é—®

#### ä»£ç ç¤ºä¾‹:

**UserDao.java** - ç»Ÿä¸€çš„CRUDæ“ä½œ:
```java
// æ–‡ä»¶: src/main/java/com/exam/dao/UserDao.java:10-157
package com.exam.dao;

import com.exam.entity.User;
import com.exam.util.DBUtil;
import java.sql.*;
import java.util.ArrayList;
import java.util.List;

public class UserDao {

    // ç™»å½•æ–¹æ³•
    public User login(String username, String password, String role) {
        String sql = "SELECT * FROM user WHERE username=? AND password=? AND role=?";
        try (Connection conn = DBUtil.getConnection();
             PreparedStatement ps = conn.prepareStatement(sql)) {
            ps.setString(1, username);
            ps.setString(2, password);
            ps.setString(3, role);
            ResultSet rs = ps.executeQuery();
            if (rs.next()) {
                User u = new User();
                u.setId(rs.getInt("id"));
                u.setUsername(rs.getString("username"));
                u.setPassword(rs.getString("password"));
                u.setRole(rs.getString("role"));
                return u;
            }
        } catch (SQLException e) {
            e.printStackTrace();
        }
        return null;
    }

    // æŸ¥è¯¢æ‰€æœ‰ç”¨æˆ·
    public List<User> findAll() {
        List<User> list = new ArrayList<>();
        String sql = "SELECT * FROM user";
        try (Connection conn = DBUtil.getConnection();
             PreparedStatement ps = conn.prepareStatement(sql);
             ResultSet rs = ps.executeQuery()) {
            while (rs.next()) {
                User u = new User();
                u.setId(rs.getInt("id"));
                u.setUsername(rs.getString("username"));
                u.setPassword(rs.getString("password"));
                u.setRole(rs.getString("role"));
                list.add(u);
            }
        } catch (SQLException e) {
            e.printStackTrace();
        }
        return list;
    }

    // æ·»åŠ ç”¨æˆ·
    public void addUser(User user) {
        String sql = "INSERT INTO user(username, password, role) VALUES (?, ?, ?)";
        try (Connection conn = DBUtil.getConnection();
             PreparedStatement ps = conn.prepareStatement(sql)) {
            ps.setString(1, user.getUsername());
            ps.setString(2, user.getPassword());
            ps.setString(3, user.getRole());
            ps.executeUpdate();
        } catch (SQLException e) {
            e.printStackTrace();
        }
    }

    // æ ¹æ® ID åˆ é™¤ç”¨æˆ·
    public void deleteById(int id) {
        String sql = "DELETE FROM user WHERE id = ?";
        try (Connection conn = DBUtil.getConnection();
             PreparedStatement ps = conn.prepareStatement(sql)) {
            ps.setInt(1, id);
            ps.executeUpdate();
        } catch (SQLException e) {
            e.printStackTrace();
        }
    }

    // æ ¹æ®IDæŸ¥æ‰¾ç”¨æˆ·
    public User findById(int id) {
        String sql = "SELECT * FROM user WHERE id = ?";
        try (Connection conn = DBUtil.getConnection();
             PreparedStatement ps = conn.prepareStatement(sql)) {
            ps.setInt(1, id);
            ResultSet rs = ps.executeQuery();
            if (rs.next()) {
                User u = new User();
                u.setId(rs.getInt("id"));
                u.setUsername(rs.getString("username"));
                u.setPassword(rs.getString("password"));
                u.setRole(rs.getString("role"));
                u.setDisplayName(rs.getString("display_name"));
                return u;
            }
        } catch (SQLException e) {
            e.printStackTrace();
        }
        return null;
    }

    // æ›´æ–°ç”¨æˆ·ä¿¡æ¯
    public boolean update(User user) {
        String sql = "UPDATE user SET display_name = ? WHERE id = ?";
        try (Connection conn = DBUtil.getConnection();
             PreparedStatement ps = conn.prepareStatement(sql)) {
            ps.setString(1, user.getDisplayName());
            ps.setInt(2, user.getId());
            return ps.executeUpdate() > 0;
        } catch (SQLException e) {
            e.printStackTrace();
            return false;
        }
    }
}
```

**QuestionDao.java** - æ¡ä»¶æŸ¥è¯¢æ–¹æ³•:
```java
// æ–‡ä»¶: src/main/java/com/exam/dao/QuestionDao.java:134-179
// æŒ‰æ¡ä»¶æœç´¢è¯•é¢˜
public List<Question> search(String keyword, String type, String subject, int teacherId) {
    StringBuilder sql = new StringBuilder("SELECT * FROM questions WHERE 1=1");
    List<Object> params = new ArrayList<>();

    if (teacherId > 0) {
        sql.append(" AND teacher_id = ?");
        params.add(teacherId);
    }

    if (keyword != null && !keyword.trim().isEmpty()) {
        sql.append(" AND (title LIKE ? OR analysis LIKE ?)");
        params.add("%" + keyword + "%");
        params.add("%" + keyword + "%");
    }

    if (type != null && !type.equals("all")) {
        sql.append(" AND type = ?");
        params.add(type);
    }

    if (subject != null && !subject.equals("all")) {
        sql.append(" AND subject = ?");
        params.add(subject);
    }

    sql.append(" ORDER BY create_time DESC");

    List<Question> questions = new ArrayList<>();

    try (Connection conn = DBUtil.getConnection();
         PreparedStatement pstmt = conn.prepareStatement(sql.toString())) {

        for (int i = 0; i < params.size(); i++) {
            pstmt.setObject(i + 1, params.get(i));
        }

        ResultSet rs = pstmt.executeQuery();
        while (rs.next()) {
            questions.add(extractQuestionFromResultSet(rs));
        }
    } catch (SQLException e) {
        e.printStackTrace();
    }
    return questions;
}
```

**ä¼˜åŠ¿**:
- âœ… éš”ç¦»æ•°æ®è®¿é—®é€»è¾‘å’Œä¸šåŠ¡é€»è¾‘
- âœ… ä¾¿äºæ•°æ®åº“æ›´æ¢å’Œè¿ç§»
- âœ… ç»Ÿä¸€çš„å¼‚å¸¸å¤„ç†
- âœ… ä»£ç å¤ç”¨æ€§é«˜

---

### 3. Template Method (æ¨¡æ¿æ–¹æ³•) æ¨¡å¼

**æ¨¡å¼è¯´æ˜**: å®šä¹‰ç®—æ³•éª¨æ¶ï¼Œå°†æŸäº›æ­¥éª¤å»¶è¿Ÿåˆ°å­ç±»å®ç°ã€‚

**åº”ç”¨ä½ç½®**:
1. Servlet çš„ `doGet()`/`doPost()` æ–¹æ³•
2. DAO ç±»ä¸­çš„ `extractFromResultSet()` æ–¹æ³•

#### ä»£ç ç¤ºä¾‹:

**Servletçš„æ¨¡æ¿æ–¹æ³•** - `StudentExamServlet.java`:
```java
// æ–‡ä»¶: src/main/java/com/exam/servlet/student/StudentExamServlet.java:22-62
@WebServlet(name = "StudentExamServlet", urlPatterns = {"/student/exam/take", "/student/exam/submit"})
public class StudentExamServlet extends HttpServlet {

    private final ExamDao examDao = new ExamDao();

    @Override
    protected void doGet(HttpServletRequest request, HttpServletResponse response)
            throws ServletException, IOException {

        // æ£€æŸ¥ç”¨æˆ·ç™»å½•å’Œè§’è‰²
        User user = (User) request.getSession().getAttribute("currentUser");
        if (user == null || !"student".equals(user.getRole())) {
            response.sendRedirect(request.getContextPath() + "/login.jsp");
            return;
        }

        String servletPath = request.getServletPath();
        if (servletPath.endsWith("/take")) {
            // æ˜¾ç¤ºè€ƒè¯•ç•Œé¢
            showExamInterface(request, response, user);
        } else {
            response.sendRedirect(request.getContextPath() + "/student/exam/list");
        }
    }

    @Override
    protected void doPost(HttpServletRequest request, HttpServletResponse response)
            throws ServletException, IOException {

        // è®¾ç½®ç¼–ç 
        request.setCharacterEncoding("UTF-8");

        // æ£€æŸ¥ç”¨æˆ·ç™»å½•å’Œè§’è‰²
        User user = (User) request.getSession().getAttribute("currentUser");
        if (user == null || !"student".equals(user.getRole())) {
            response.sendRedirect(request.getContextPath() + "/login.jsp");
            return;
        }

        String servletPath = request.getServletPath();
        if (servletPath.endsWith("/submit")) {
            // æäº¤è€ƒè¯•ç­”æ¡ˆ
            submitExam(request, response, user);
        } else {
            response.sendRedirect(request.getContextPath() + "/student/exam/list");
        }
    }

    // ç§æœ‰è¾…åŠ©æ–¹æ³• - æ˜¾ç¤ºè€ƒè¯•ç•Œé¢
    private void showExamInterface(HttpServletRequest request,
                                   HttpServletResponse response, User user)
            throws ServletException, IOException {
        // å…·ä½“å®ç°...
    }

    // ç§æœ‰è¾…åŠ©æ–¹æ³• - æäº¤è€ƒè¯•
    private void submitExam(HttpServletRequest request,
                           HttpServletResponse response, User user)
            throws ServletException, IOException {
        // å…·ä½“å®ç°...
    }
}
```

**DAOçš„æ¨¡æ¿æ–¹æ³•** - `ExamDao.java`:
```java
// æ–‡ä»¶: src/main/java/com/exam/dao/ExamDao.java:183-208
// ä»ResultSetæå–Examå¯¹è±¡ - å¤ç”¨çš„æ¨¡æ¿æ–¹æ³•
private Exam extractExamFromResultSet(ResultSet rs) throws SQLException {
    Exam exam = new Exam();
    exam.setId(rs.getInt("id"));
    exam.setTitle(rs.getString("title"));
    exam.setDescription(rs.getString("description"));
    exam.setDuration(rs.getInt("duration"));
    exam.setStartTime(rs.getTimestamp("start_time"));
    exam.setEndTime(rs.getTimestamp("end_time"));
    exam.setTotalScore(rs.getInt("total_score"));
    exam.setPassScore(rs.getInt("pass_score"));
    exam.setStatus(rs.getString("status"));
    exam.setTeacherId(rs.getInt("teacher_id"));

    Timestamp createTime = rs.getTimestamp("create_time");
    if (createTime != null) {
        exam.setCreateTime(createTime);
    }

    Timestamp updateTime = rs.getTimestamp("update_time");
    if (updateTime != null) {
        exam.setUpdateTime(updateTime);
    }

    return exam;
}

// åœ¨å¤šä¸ªæŸ¥è¯¢æ–¹æ³•ä¸­å¤ç”¨
public Exam findById(int id) {
    String sql = "SELECT * FROM exams WHERE id = ?";
    try (Connection conn = DBUtil.getConnection();
         PreparedStatement pstmt = conn.prepareStatement(sql)) {
        pstmt.setInt(1, id);
        ResultSet rs = pstmt.executeQuery();
        if (rs.next()) {
            return extractExamFromResultSet(rs);  // å¤ç”¨æ¨¡æ¿æ–¹æ³•
        }
    } catch (SQLException e) {
        e.printStackTrace();
    }
    return null;
}
```

**QuestionDao.java** ä¸­çš„ç±»ä¼¼å®ç°:
```java
// æ–‡ä»¶: src/main/java/com/exam/dao/QuestionDao.java:199-223
// ä»ResultSetæå–Questionå¯¹è±¡
private Question extractQuestionFromResultSet(ResultSet rs) throws SQLException {
    Question question = new Question();
    question.setId(rs.getInt("id"));
    question.setTitle(rs.getString("title"));
    question.setType(rs.getString("type"));
    question.setOptions(rs.getString("options"));
    question.setAnswer(rs.getString("answer"));
    question.setAnalysis(rs.getString("analysis"));
    question.setDifficulty(rs.getInt("difficulty"));
    question.setSubject(rs.getString("subject"));
    question.setTeacherId(rs.getInt("teacher_id"));

    Timestamp createTime = rs.getTimestamp("create_time");
    if (createTime != null) {
        question.setCreateTime(createTime.toLocalDateTime());
    }

    Timestamp updateTime = rs.getTimestamp("update_time");
    if (updateTime != null) {
        question.setUpdateTime(updateTime.toLocalDateTime());
    }

    return question;
}
```

**ä¼˜åŠ¿**:
- âœ… ä»£ç å¤ç”¨ï¼Œå‡å°‘é‡å¤
- âœ… ç»Ÿä¸€çš„å¤„ç†æµç¨‹
- âœ… æ˜“äºç»´æŠ¤å’Œä¿®æ”¹

---

### 4. Filter (è¿‡æ»¤å™¨) æ¨¡å¼

**æ¨¡å¼è¯´æ˜**: åœ¨è¯·æ±‚åˆ°è¾¾ç›®æ ‡èµ„æºä¹‹å‰æˆ–ä¹‹åï¼Œå¯¹è¯·æ±‚/å“åº”è¿›è¡Œé¢„å¤„ç†æˆ–åå¤„ç†ã€‚

**åº”ç”¨ä½ç½®**: `CharacterEncodingFilter.java`

#### ä»£ç ç¤ºä¾‹:

```java
// æ–‡ä»¶: src/main/java/com/exam/filter/CharacterEncodingFilter.java:1-38
package com.exam.filter;

import javax.servlet.*;
import javax.servlet.annotation.WebFilter;
import java.io.IOException;

/**
 * å­—ç¬¦ç¼–ç è¿‡æ»¤å™¨
 * ç”¨äºè§£å†³è¯·æ±‚å’Œå“åº”çš„ä¸­æ–‡ä¹±ç é—®é¢˜
 */
@WebFilter("/*")  // æ‹¦æˆªæ‰€æœ‰è¯·æ±‚
public class CharacterEncodingFilter implements Filter {

    @Override
    public void init(FilterConfig filterConfig) throws ServletException {
        System.out.println("âœ… å­—ç¬¦ç¼–ç è¿‡æ»¤å™¨åˆå§‹åŒ–å®Œæˆ");
    }

    @Override
    public void doFilter(ServletRequest request, ServletResponse response, FilterChain chain)
            throws IOException, ServletException {

        // è®¾ç½®è¯·æ±‚ç¼–ç 
        request.setCharacterEncoding("UTF-8");

        // è®¾ç½®å“åº”ç¼–ç 
        response.setContentType("text/html;charset=UTF-8");
        response.setCharacterEncoding("UTF-8");

        // ç»§ç»­æ‰§è¡Œè¿‡æ»¤å™¨é“¾
        chain.doFilter(request, response);
    }

    @Override
    public void destroy() {
        System.out.println("ğŸ”´ å­—ç¬¦ç¼–ç è¿‡æ»¤å™¨é”€æ¯");
    }
}
```

**å·¥ä½œæµç¨‹**:
```
å®¢æˆ·ç«¯è¯·æ±‚
    â†“
CharacterEncodingFilter (è®¾ç½®UTF-8ç¼–ç )
    â†“
å…¶ä»–è¿‡æ»¤å™¨ (å¦‚æœæœ‰)
    â†“
ç›®æ ‡Servlet
    â†“
å“åº”è¿”å› (UTF-8ç¼–ç )
    â†“
å®¢æˆ·ç«¯
```

**ä¼˜åŠ¿**:
- âœ… ç»Ÿä¸€å¤„ç†è·¨åˆ‡é¢å…³æ³¨ç‚¹(ç¼–ç ã€æ—¥å¿—ã€æƒé™ç­‰)
- âœ… é¿å…é‡å¤ä»£ç 
- âœ… æ˜“äºæ·»åŠ æˆ–ç§»é™¤åŠŸèƒ½
- âœ… ç¬¦åˆå¼€é—­åŸåˆ™

---

### 5. Front Controller (å‰ç«¯æ§åˆ¶å™¨) æ¨¡å¼

**æ¨¡å¼è¯´æ˜**: æä¾›é›†ä¸­çš„è¯·æ±‚å¤„ç†æœºåˆ¶ï¼Œæ‰€æœ‰è¯·æ±‚ç”±å•ä¸€å¤„ç†å™¨å¤„ç†ã€‚

**åº”ç”¨ä½ç½®**: `LoginServlet.java` - åŸºäºè§’è‰²çš„è·¯ç”±åˆ†å‘

#### ä»£ç ç¤ºä¾‹:

```java
// æ–‡ä»¶: src/main/java/com/exam/servlet/LoginServlet.java:11-62
@WebServlet(name = "LoginServlet", urlPatterns = {"/login"})
public class LoginServlet extends HttpServlet {

    private final UserDao userDao = new UserDao();

    @Override
    protected void doPost(HttpServletRequest request, HttpServletResponse response)
            throws ServletException, IOException {

        request.setCharacterEncoding("UTF-8");
        String username = request.getParameter("username");
        String password = request.getParameter("password");
        String role = request.getParameter("role");

        // è°ƒç”¨å®é™…å­˜åœ¨çš„ login() æ–¹æ³•
        User user = userDao.login(username, password, role);

        if (user != null) {
            // ç™»å½•æˆåŠŸ
            HttpSession session = request.getSession();
            session.setAttribute("currentUser", user);
            session.setMaxInactiveInterval(60 * 30); // 30åˆ†é’Ÿ

            // æ ¹æ®è§’è‰²è·³è½¬ä¸åŒé¦–é¡µ - Front Controller æ ¸å¿ƒé€»è¾‘
            switch (role) {
                case "admin":
                    response.sendRedirect(request.getContextPath() + "/admin/home.jsp");
                    break;
                case "teacher":
                    response.sendRedirect(request.getContextPath() + "/teacher/home.jsp");
                    break;
                case "student":
                    response.sendRedirect(request.getContextPath() + "/student/home.jsp");
                    break;
                default:
                    response.sendRedirect(request.getContextPath() + "/login.jsp");
                    break;
            }

        } else {
            // ç™»å½•å¤±è´¥
            request.setAttribute("error", "ç”¨æˆ·åæˆ–å¯†ç æˆ–è§’è‰²ä¸æ­£ç¡®");
            request.getRequestDispatcher("/login.jsp").forward(request, response);
        }
    }

    @Override
    protected void doGet(HttpServletRequest req, HttpServletResponse resp)
            throws ServletException, IOException {
        resp.sendRedirect(req.getContextPath() + "/login.jsp");
    }
}
```

**è·¯ç”±åˆ†å‘æµç¨‹**:
```
ç”¨æˆ·ç™»å½• â†’ LoginServlet (å‰ç«¯æ§åˆ¶å™¨)
              â†“
         éªŒè¯ç”¨æˆ·ä¿¡æ¯
              â†“
      æ ¹æ®è§’è‰²åˆ†å‘è·¯ç”±:
         - admin â†’ /admin/home.jsp
         - teacher â†’ /teacher/home.jsp
         - student â†’ /student/home.jsp
         - å…¶ä»– â†’ /login.jsp
```

**ä¼˜åŠ¿**:
- âœ… é›†ä¸­æ§åˆ¶è¯·æ±‚è·¯ç”±
- âœ… ç»Ÿä¸€çš„å®‰å…¨æ£€æŸ¥å’Œä¼šè¯ç®¡ç†
- âœ… å‡å°‘é‡å¤çš„éªŒè¯é€»è¾‘
- âœ… æ˜“äºæ·»åŠ æ–°çš„è·¯ç”±è§„åˆ™

---

### 6. Strategy (ç­–ç•¥) æ¨¡å¼

**æ¨¡å¼è¯´æ˜**: å®šä¹‰ä¸€ç³»åˆ—ç®—æ³•ï¼Œå°†æ¯ä¸ªç®—æ³•å°è£…èµ·æ¥ï¼Œä½¿å®ƒä»¬å¯ä»¥äº’ç›¸æ›¿æ¢ã€‚

**åº”ç”¨ä½ç½®**: `Exam.java` å®ä½“ç±»ä¸­çš„çŠ¶æ€åˆ¤æ–­æ–¹æ³•

#### ä»£ç ç¤ºä¾‹:

```java
// æ–‡ä»¶: src/main/java/com/exam/entity/Exam.java:81-120
public class Exam {
    private int id;
    private String title;
    private String status; // draft, published, ended
    private Timestamp startTime;
    private Timestamp endTime;
    // ... å…¶ä»–å±æ€§

    // ç­–ç•¥æ–¹æ³• 1: è·å–çŠ¶æ€æ–‡æœ¬
    public String getStatusText() {
        switch (status) {
            case "draft": return "è‰ç¨¿";
            case "published": return "å·²å‘å¸ƒ";
            case "ended": return "å·²ç»“æŸ";
            default: return "æœªçŸ¥";
        }
    }

    // ç­–ç•¥æ–¹æ³• 2: æ£€æŸ¥è€ƒè¯•æ˜¯å¦å¯ä»¥å‚åŠ 
    public boolean canTakeExam() {
        Timestamp now = new Timestamp(System.currentTimeMillis());
        return "published".equals(status) &&
               startTime != null && endTime != null &&
               now.after(startTime) && now.before(endTime);
    }

    // ç­–ç•¥æ–¹æ³• 3: æ£€æŸ¥è€ƒè¯•æ˜¯å¦å·²ç»“æŸ
    public boolean isEnded() {
        Timestamp now = new Timestamp(System.currentTimeMillis());
        return endTime != null && now.after(endTime);
    }

    // ç­–ç•¥æ–¹æ³• 4: æ£€æŸ¥è€ƒè¯•æ˜¯å¦è¿˜æœªå¼€å§‹
    public boolean isNotStarted() {
        Timestamp now = new Timestamp(System.currentTimeMillis());
        return startTime != null && now.before(startTime);
    }

    // ç­–ç•¥æ–¹æ³• 5: è·å–å‰©ä½™æ—¶é—´ï¼ˆåˆ†é’Ÿï¼‰
    public long getRemainingMinutes() {
        Timestamp now = new Timestamp(System.currentTimeMillis());
        if (endTime == null || now.after(endTime)) {
            return 0;
        }
        long diff = endTime.getTime() - now.getTime();
        return diff / (60 * 1000);
    }
}
```

**Question.java** ä¸­çš„ç±»ä¼¼å®ç°:
```java
// æ–‡ä»¶: src/main/java/com/exam/entity/Question.java:66-84
public class Question {
    private String type; // single(å•é€‰), multiple(å¤šé€‰), essay(ä¸»è§‚)
    private int difficulty; // éš¾åº¦ 1-ç®€å• 2-ä¸­ç­‰ 3-å›°éš¾

    // ç­–ç•¥æ–¹æ³• 1: è·å–éš¾åº¦æ–‡æœ¬
    public String getDifficultyText() {
        switch (difficulty) {
            case 1: return "ç®€å•";
            case 2: return "ä¸­ç­‰";
            case 3: return "å›°éš¾";
            default: return "æœªçŸ¥";
        }
    }

    // ç­–ç•¥æ–¹æ³• 2: è·å–é¢˜å‹æ–‡æœ¬
    public String getTypeText() {
        switch (type) {
            case "single": return "å•é€‰é¢˜";
            case "multiple": return "å¤šé€‰é¢˜";
            case "essay": return "ä¸»è§‚é¢˜";
            default: return "æœªçŸ¥";
        }
    }
}
```

**ä¼˜åŠ¿**:
- âœ… å°è£…å˜åŒ–çš„ç®—æ³•
- âœ… é¿å…å¤§é‡if-elseåˆ¤æ–­
- âœ… æ˜“äºæ‰©å±•æ–°çš„çŠ¶æ€æˆ–ç­–ç•¥
- âœ… æé«˜ä»£ç å¯è¯»æ€§

---

### 7. Factory Method (å·¥å‚æ–¹æ³•) æ¨¡å¼çš„ç®€åŒ–ç‰ˆ

**æ¨¡å¼è¯´æ˜**: æä¾›åˆ›å»ºå¯¹è±¡çš„æ¥å£ï¼Œå»¶è¿Ÿå¯¹è±¡å®ä¾‹åŒ–åˆ°ä½¿ç”¨æ—¶ã€‚

**åº”ç”¨ä½ç½®**: `DBUtil.java` - æ•°æ®åº“è¿æ¥å·¥å‚

#### ä»£ç ç¤ºä¾‹:

```java
// æ–‡ä»¶: src/main/java/com/exam/util/DBUtil.java:1-24
package com.exam.util;

import java.sql.Connection;
import java.sql.DriverManager;
import java.sql.SQLException;

public class DBUtil {
    // æ•°æ®åº“é…ç½®å¸¸é‡
    private static final String URL = "jdbc:mysql://localhost:3306/exam_system?useUnicode=true&characterEncoding=utf8&serverTimezone=UTC";
    private static final String USER = "root";
    private static final String PASSWORD = ""; // no password

    // é™æ€ä»£ç å— - åŠ è½½é©±åŠ¨ï¼ˆåªæ‰§è¡Œä¸€æ¬¡ï¼‰
    static {
        try {
            Class.forName("com.mysql.cj.jdbc.Driver");
        } catch (ClassNotFoundException e) {
            throw new RuntimeException(e);
        }
    }

    // å·¥å‚æ–¹æ³• - åˆ›å»ºæ•°æ®åº“è¿æ¥
    public static Connection getConnection() throws SQLException {
        return DriverManager.getConnection(URL, USER, PASSWORD);
    }
}
```

**ä½¿ç”¨ç¤ºä¾‹** - åœ¨DAOä¸­è°ƒç”¨:
```java
// æ–‡ä»¶: src/main/java/com/exam/dao/UserDao.java:15-16
try (Connection conn = DBUtil.getConnection();
     PreparedStatement ps = conn.prepareStatement(sql)) {
    // ä½¿ç”¨è¿æ¥...
}
```

**ä¼˜åŠ¿**:
- âœ… é›†ä¸­ç®¡ç†æ•°æ®åº“é…ç½®
- âœ… éšè—è¿æ¥åˆ›å»ºçš„å¤æ‚æ€§
- âœ… ä¾¿äºåˆ‡æ¢æ•°æ®åº“å®ç°
- âœ… æ”¯æŒè¿æ¥æ± æ‰©å±•

---

### 8. JavaBean / POJO (Plain Old Java Object) æ¨¡å¼

**æ¨¡å¼è¯´æ˜**: ç®€å•çš„Javaå¯¹è±¡ï¼Œéµå¾ªgetter/setterè§„èŒƒï¼Œä¾¿äºæ¡†æ¶å’Œå·¥å…·ä½¿ç”¨ã€‚

**åº”ç”¨ä½ç½®**: `com.exam.entity` åŒ…ä¸‹æ‰€æœ‰å®ä½“ç±»

**å®ç°çš„å®ä½“ç±»**:
- `User.java` - ç”¨æˆ·å®ä½“
- `Exam.java` - è€ƒè¯•å®ä½“
- `Question.java` - è¯•é¢˜å®ä½“
- `Course.java` - è¯¾ç¨‹å®ä½“
- `Class.java` - ç­çº§å®ä½“
- `Score.java` - æˆç»©å®ä½“

#### ä»£ç ç¤ºä¾‹:

**æ ‡å‡†JavaBean** - `User.java`:
```java
// æ–‡ä»¶: src/main/java/com/exam/entity/User.java:1-21
package com.exam.entity;

public class User {
    // ç§æœ‰å±æ€§
    private int id;
    private String username;
    private String password;
    private String role;
    private String displayName;

    // å…¬å…±getterå’Œsetteræ–¹æ³•
    public int getId() { return id; }
    public void setId(int id) { this.id = id; }

    public String getUsername() { return username; }
    public void setUsername(String username) { this.username = username; }

    public String getPassword() { return password; }
    public void setPassword(String password) { this.password = password; }

    public String getRole() { return role; }
    public void setRole(String role) { this.role = role; }

    public String getDisplayName() { return displayName; }
    public void setDisplayName(String displayName) { this.displayName = displayName; }
}
```

**å¸¦æ„é€ å™¨çš„JavaBean** - `Exam.java`:
```java
// æ–‡ä»¶: src/main/java/com/exam/entity/Exam.java:6-39
public class Exam {
    private int id;
    private String title;
    private String description;
    private int duration;
    private Timestamp startTime;
    private Timestamp endTime;
    private int totalScore;
    private int passScore;
    private String status;
    private int teacherId;
    private Timestamp createTime;
    private Timestamp updateTime;
    private List<Question> questions;

    // æ— å‚æ„é€ å™¨
    public Exam() {}

    // æœ‰å‚æ„é€ å™¨
    public Exam(String title, String description, int duration,
                Timestamp startTime, Timestamp endTime, int totalScore,
                int passScore, String status, int teacherId) {
        this.title = title;
        this.description = description;
        this.duration = duration;
        this.startTime = startTime;
        this.endTime = endTime;
        this.totalScore = totalScore;
        this.passScore = passScore;
        this.status = status;
        this.teacherId = teacherId;
        this.createTime = new Timestamp(System.currentTimeMillis());
        this.updateTime = new Timestamp(System.currentTimeMillis());
    }

    // ... getter/setteræ–¹æ³•
}
```

**å¸¦ä¸šåŠ¡é€»è¾‘çš„JavaBean** - `Question.java`:
```java
// æ–‡ä»¶: src/main/java/com/exam/entity/Question.java:3-30
public class Question {
    private int id;
    private String title;
    private String type;
    private String options;
    private String answer;
    private String analysis;
    private int difficulty;
    private String subject;
    private int teacherId;
    private java.time.LocalDateTime createTime;
    private java.time.LocalDateTime updateTime;

    public Question() {}

    public Question(String title, String type, String options, String answer,
                   String analysis, int difficulty, String subject, int teacherId) {
        this.title = title;
        this.type = type;
        this.options = options;
        this.answer = answer;
        this.analysis = analysis;
        this.difficulty = difficulty;
        this.subject = subject;
        this.teacherId = teacherId;
        this.createTime = java.time.LocalDateTime.now();
        this.updateTime = java.time.LocalDateTime.now();
    }

    // ... getter/setter + ä¸šåŠ¡æ–¹æ³•
}
```

**ä¼˜åŠ¿**:
- âœ… ç¬¦åˆJavaBeanè§„èŒƒï¼Œä¾¿äºæ¡†æ¶é›†æˆ
- âœ… æ˜“äºåºåˆ—åŒ–å’Œååºåˆ—åŒ–
- âœ… æ”¯æŒJSPä¸­çš„ELè¡¨è¾¾å¼è®¿é—®
- âœ… ä»£ç ç®€æ´ï¼Œæ˜“äºç»´æŠ¤

---

### 9. Dependency Injection (ä¾èµ–æ³¨å…¥) çš„æ‰‹åŠ¨å®ç°

**æ¨¡å¼è¯´æ˜**: é€šè¿‡æ„é€ å™¨æˆ–å­—æ®µæ³¨å…¥ä¾èµ–ï¼Œé™ä½è€¦åˆåº¦ã€‚

**åº”ç”¨ä½ç½®**: Servletç±»ä¸­å¯¹DAOçš„ä¾èµ–

#### ä»£ç ç¤ºä¾‹:

**å­—æ®µæ³¨å…¥** - `AdminUserListServlet.java`:
```java
// æ–‡ä»¶: src/main/java/com/exam/servlet/admin/AdminUserListServlet.java:16-32
@WebServlet("/admin/user/list")
public class AdminUserListServlet extends HttpServlet {

    // ä¾èµ–æ³¨å…¥ - æ‰‹åŠ¨åˆ›å»ºDAOå®ä¾‹
    private UserDao userDao = new UserDao();

    @Override
    protected void doGet(HttpServletRequest req, HttpServletResponse resp)
            throws ServletException, IOException {
        resp.setContentType("text/html;charset=UTF-8");

        // ä½¿ç”¨æ³¨å…¥çš„ä¾èµ–
        List<User> users = userDao.findAll();
        req.setAttribute("users", users);
        req.getRequestDispatcher("/admin/admin_user_list.jsp").forward(req, resp);
    }
}
```

**finalå­—æ®µæ³¨å…¥** - `LoginServlet.java`:
```java
// æ–‡ä»¶: src/main/java/com/exam/servlet/LoginServlet.java:12-14
@WebServlet(name = "LoginServlet", urlPatterns = {"/login"})
public class LoginServlet extends HttpServlet {

    // ä½¿ç”¨finalç¡®ä¿ä¸å¯å˜æ€§
    private final UserDao userDao = new UserDao();

    @Override
    protected void doPost(HttpServletRequest request, HttpServletResponse response)
            throws ServletException, IOException {
        // ...
        User user = userDao.login(username, password, role);
        // ...
    }
}
```

**ä¼˜åŠ¿**:
- âœ… é™ä½ç±»ä¹‹é—´çš„è€¦åˆ
- âœ… ä¾¿äºå•å…ƒæµ‹è¯•ï¼ˆå¯mockä¾èµ–ï¼‰
- âœ… ä»£ç æ›´æ¸…æ™°ï¼Œä¾èµ–å…³ç³»æ˜ç¡®
- âœ… ä¸ºå°†æ¥å¼•å…¥Springç­‰IoCå®¹å™¨åšå‡†å¤‡

---

### 10. Try-With-Resources æ¨¡å¼ (èµ„æºç®¡ç†æ¨¡å¼)

**æ¨¡å¼è¯´æ˜**: Java 7å¼•å…¥çš„è‡ªåŠ¨èµ„æºç®¡ç†ï¼Œç¡®ä¿èµ„æºæ­£ç¡®å…³é—­ã€‚

**åº”ç”¨ä½ç½®**: æ‰€æœ‰DAOç±»ä¸­çš„æ•°æ®åº“è¿æ¥ç®¡ç†

#### ä»£ç ç¤ºä¾‹:

**å•ä¸ªèµ„æºç®¡ç†** - `UserDao.java`:
```java
// æ–‡ä»¶: src/main/java/com/exam/dao/UserDao.java:70-80
public void deleteById(int id) {
    String sql = "DELETE FROM user WHERE id = ?";
    // try-with-resources è‡ªåŠ¨å…³é—­ Connection å’Œ PreparedStatement
    try (Connection conn = DBUtil.getConnection();
         PreparedStatement ps = conn.prepareStatement(sql)) {
        ps.setInt(1, id);
        ps.executeUpdate();
    } catch (SQLException e) {
        e.printStackTrace();
    }
}
```

**å¤šä¸ªèµ„æºç®¡ç†** - `CourseDao.java`:
```java
// æ–‡ä»¶: src/main/java/com/exam/dao/CourseDao.java:13-39
public List<Course> findAll() {
    List<Course> courseList = new ArrayList<>();
    String sql = "SELECT * FROM course ORDER BY semester, course_code";

    // è‡ªåŠ¨ç®¡ç† Connection, PreparedStatement, ResultSet
    try (Connection conn = DBUtil.getConnection();
         PreparedStatement ps = conn.prepareStatement(sql);
         ResultSet rs = ps.executeQuery()) {

        while (rs.next()) {
            Course c = new Course();
            c.setId(rs.getInt("id"));
            c.setCourseName(rs.getString("course_name"));
            c.setCourseCode(rs.getString("course_code"));
            c.setDescription(rs.getString("description"));
            c.setTeacherName(rs.getString("teacher_name"));
            c.setCredit(rs.getInt("credit"));
            c.setSemester(rs.getString("semester"));
            c.setStatus(rs.getString("status"));
            c.setCreateTime(rs.getTimestamp("created_time"));
            c.setUpdateTime(rs.getTimestamp("updated_time"));
            courseList.add(c);
        }
    } catch (SQLException e) {
        e.printStackTrace();
    }

    return courseList;
}
```

**ä¼ ç»Ÿæ–¹å¼å¯¹æ¯”** (æœªä½¿ç”¨çš„æ—§ä»£ç é£æ ¼):
```java
// âŒ ä¼ ç»Ÿæ–¹å¼ - éœ€è¦æ‰‹åŠ¨å…³é—­èµ„æº
Connection conn = null;
PreparedStatement ps = null;
ResultSet rs = null;
try {
    conn = DBUtil.getConnection();
    ps = conn.prepareStatement(sql);
    rs = ps.executeQuery();
    // å¤„ç†ç»“æœ...
} catch (SQLException e) {
    e.printStackTrace();
} finally {
    // å¿…é¡»æ‰‹åŠ¨å…³é—­ï¼Œä¸”è¦å¤„ç†æ¯ä¸ªå…³é—­å¯èƒ½æŠ›å‡ºçš„å¼‚å¸¸
    if (rs != null) try { rs.close(); } catch (SQLException e) {}
    if (ps != null) try { ps.close(); } catch (SQLException e) {}
    if (conn != null) try { conn.close(); } catch (SQLException e) {}
}

// âœ… Try-with-resourcesæ–¹å¼ - è‡ªåŠ¨å…³é—­
try (Connection conn = DBUtil.getConnection();
     PreparedStatement ps = conn.prepareStatement(sql);
     ResultSet rs = ps.executeQuery()) {
    // å¤„ç†ç»“æœ...
} catch (SQLException e) {
    e.printStackTrace();
}
```

**ä¼˜åŠ¿**:
- âœ… è‡ªåŠ¨å…³é—­èµ„æºï¼Œé˜²æ­¢èµ„æºæ³„æ¼
- âœ… ä»£ç æ›´ç®€æ´ï¼Œå¯è¯»æ€§æ›´é«˜
- âœ… å‡å°‘finallyå—çš„å¤æ‚æ€§
- âœ… å³ä½¿å‘ç”Ÿå¼‚å¸¸ä¹Ÿèƒ½ä¿è¯èµ„æºå…³é—­

---

## è®¾è®¡æ¨¡å¼ä½¿ç”¨ç»Ÿè®¡

| è®¾è®¡æ¨¡å¼ | åº”ç”¨æ¬¡æ•° | ä¸»è¦æ–‡ä»¶ | é‡è¦æ€§ |
|---------|---------|---------|--------|
| MVC | 1 (æ¶æ„çº§) | æ•´ä¸ªé¡¹ç›® | â­â­â­â­â­ |
| DAO | 6ä¸ªç±» | UserDao, ExamDao, QuestionDao, CourseDao, ClassDao, ScoreDao | â­â­â­â­â­ |
| JavaBean/POJO | 6ä¸ªç±» | User, Exam, Question, Course, Class, Score | â­â­â­â­â­ |
| Template Method | æ‰€æœ‰Servlet + DAO | HttpServletå­ç±», extractFromResultSetæ–¹æ³• | â­â­â­â­ |
| Try-With-Resources | æ‰€æœ‰DAOæ–¹æ³• | æ‰€æœ‰æ•°æ®åº“æ“ä½œ | â­â­â­â­ |
| Filter | 1ä¸ªç±» | CharacterEncodingFilter | â­â­â­ |
| Front Controller | 1ä¸ªç±» | LoginServlet | â­â­â­ |
| Strategy | 2ä¸ªç±» | Exam, Question | â­â­â­ |
| Factory Method | 1ä¸ªç±» | DBUtil | â­â­â­ |
| Dependency Injection | æ‰€æœ‰Servlet | Servletä¸­çš„DAOä¾èµ– | â­â­â­ |

---

## æ¶æ„ä¼˜åŠ¿åˆ†æ

### 1. å¯ç»´æŠ¤æ€§
- âœ… æ¸…æ™°çš„åˆ†å±‚æ¶æ„ï¼ŒèŒè´£åˆ†æ˜
- âœ… DAOæ¨¡å¼éš”ç¦»æ•°æ®è®¿é—®é€»è¾‘
- âœ… ç»Ÿä¸€çš„å¼‚å¸¸å¤„ç†å’Œèµ„æºç®¡ç†

### 2. å¯æ‰©å±•æ€§
- âœ… æ˜“äºæ·»åŠ æ–°çš„å®ä½“å’ŒDAO
- âœ… Filteré“¾æ”¯æŒæ·»åŠ æ–°çš„è¿‡æ»¤å™¨
- âœ… ç­–ç•¥æ¨¡å¼æ”¯æŒæ·»åŠ æ–°çš„ä¸šåŠ¡è§„åˆ™

### 3. å¯é‡ç”¨æ€§
- âœ… DAOç±»æä¾›é€šç”¨çš„CRUDæ“ä½œ
- âœ… DBUtilç»Ÿä¸€ç®¡ç†æ•°æ®åº“è¿æ¥
- âœ… Template Methodå‡å°‘é‡å¤ä»£ç 

### 4. å®‰å…¨æ€§
- âœ… PreparedStatementé˜²æ­¢SQLæ³¨å…¥
- âœ… Try-with-resourcesé˜²æ­¢èµ„æºæ³„æ¼
- âœ… Sessionç®¡ç†æ§åˆ¶ç”¨æˆ·è®¿é—®æƒé™

---

## æ”¹è¿›å»ºè®®

### 1. å¼•å…¥ä¾èµ–æ³¨å…¥æ¡†æ¶
**å½“å‰çŠ¶æ€**: æ‰‹åŠ¨åˆ›å»ºDAOå®ä¾‹
```java
private UserDao userDao = new UserDao();
```

**å»ºè®®æ”¹è¿›**: ä½¿ç”¨Springæ¡†æ¶è¿›è¡Œä¾èµ–æ³¨å…¥
```java
@Autowired
private UserDao userDao;
```

### 2. æ·»åŠ Serviceå±‚
**å½“å‰é—®é¢˜**: Servletç›´æ¥è°ƒç”¨DAOï¼Œä¸šåŠ¡é€»è¾‘åˆ†æ•£

**å»ºè®®æ¶æ„**:
```
Controller (Servlet) â†’ Service (ä¸šåŠ¡é€»è¾‘å±‚) â†’ DAO (æ•°æ®è®¿é—®å±‚)
```

### 3. ä½¿ç”¨è¿æ¥æ± 
**å½“å‰çŠ¶æ€**: æ¯æ¬¡åˆ›å»ºæ–°è¿æ¥
```java
public static Connection getConnection() throws SQLException {
    return DriverManager.getConnection(URL, USER, PASSWORD);
}
```

**å»ºè®®æ”¹è¿›**: ä½¿ç”¨HikariCPæˆ–Druidè¿æ¥æ± 
```java
private static HikariDataSource dataSource = new HikariDataSource();
public static Connection getConnection() throws SQLException {
    return dataSource.getConnection();
}
```

### 4. æ·»åŠ ç»Ÿä¸€å¼‚å¸¸å¤„ç†
**å»ºè®®æ·»åŠ **: å…¨å±€å¼‚å¸¸å¤„ç†Filterï¼Œç»Ÿä¸€å¤„ç†SQLExceptionç­‰å¼‚å¸¸

### 5. ä½¿ç”¨ORMæ¡†æ¶
**å»ºè®®**: å¼•å…¥MyBatisæˆ–Hibernateï¼Œå‡å°‘æ‰‹åŠ¨JDBCä»£ç 

---

## æ€»ç»“

è¯¥åœ¨çº¿è€ƒè¯•ç³»ç»Ÿè™½ç„¶æ˜¯ä¼ ç»Ÿçš„Servlet/JSPé¡¹ç›®,ä½†åœ¨è®¾è®¡ä¸Šä½“ç°äº†è‰¯å¥½çš„è½¯ä»¶å·¥ç¨‹å®è·µ:

1. **æ¶æ„æ¸…æ™°**: ä¸¥æ ¼éµå¾ªMVCä¸‰å±‚æ¶æ„
2. **æ¨¡å¼ä¸°å¯Œ**: åº”ç”¨äº†10ç§ç»å…¸è®¾è®¡æ¨¡å¼
3. **ä»£ç è§„èŒƒ**: ä½¿ç”¨Try-with-resourcesç­‰ç°ä»£Javaç‰¹æ€§
4. **èŒè´£åˆ†æ˜**: DAOã€Entityã€Servletå„å¸å…¶èŒ
5. **æ˜“äºç»´æŠ¤**: æ¨¡å—åŒ–è®¾è®¡ï¼Œä¾¿äºæ‰©å±•å’Œä¿®æ”¹

é€šè¿‡è¿™äº›è®¾è®¡æ¨¡å¼çš„åº”ç”¨ï¼Œé¡¹ç›®å®ç°äº†è‰¯å¥½çš„å¯ç»´æŠ¤æ€§ã€å¯æ‰©å±•æ€§å’Œå¯é‡ç”¨æ€§ï¼Œä¸ºåç»­å‡çº§åˆ°Spring Bootç­‰ç°ä»£æ¡†æ¶æ‰“ä¸‹äº†åšå®åŸºç¡€ã€‚

---

**æ–‡æ¡£ç”Ÿæˆæ—¶é—´**: 2025å¹´
**åˆ†æå·¥å…·**: Claude Code
**é¡¹ç›®è·¯å¾„**: `E:\online_exam_system_v4_fixed\online_exam_system`
**è¾“å‡ºè·¯å¾„**: `F:\åœ¨çº¿è€ƒè¯•ç³»ç»Ÿè®¾è®¡æ¨¡å¼åˆ†æ.md`
